{
  "type": "function",
  "function": {
    "name": "generate_edit_image",
    "displayName": "Gemini Image Studio",
    "category": "media",
    "description": "Génère ou édite des images avec gemini-2.5-flash-image-preview. Entrées: data URL, http(s), ou base64 brut. Sortie: URLs http(s). IMPORTANT: backend fixe 1024×1024 PNG (ratio 1:1).",
    "notes": [
      "Backend produit TOUJOURS du PNG 1024×1024 (ratio 1:1 fixe)",
      "Max 3 images source pour edit, 8 variations max",
      "Timeouts ajustés automatiquement pour edit multi-images"
    ],
    "parameters": {
      "type": "object",
      "properties": {
        "operation": {
          "type": "string",
          "enum": ["generate", "edit"],
          "description": "Type d'opération: génération (generate) ou édition (edit)."
        },
        "prompt": {
          "type": "string",
          "description": "Consigne utilisateur (texte)."
        },
        "images": {
          "type": "array",
          "items": { "type": "string" },
          "minItems": 1,
          "maxItems": 3,
          "description": "Images source pour edit (1-3). Formats acceptés: data URL (data:image/...;base64,...), URLs http(s), ou base64 brut. Requis pour edit, ignoré pour generate."
        },
        "n": {
          "type": "integer",
          "default": 4,
          "minimum": 1,
          "maximum": 8,
          "description": "Nombre de variations demandées (défaut 4, max 8)."
        },
        "debug": {
          "type": "boolean",
          "description": "Active un bloc debug détaillé (payload summary, fallback info)."
        }
      },
      "required": ["operation", "prompt"],
      "additionalProperties": false
    }
  }
}
