{
  "type": "function",
  "function": {
    "name": "script_executor",
    "displayName": "Script Executor",
    "description": "Execute des scripts Python qui orchestrent des outils MCP dans un bac à sable (sécurisé).",
    "parameters": {
      "type": "object",
      "properties": {
        "script": {
          "type": "string",
          "description": "Script Python. Utilise call_tool('nom', {params}) ou tools.nom(params=...) pour appeler les outils MCP. La valeur finale doit être dans une variable 'result' ou via print()."
        },
        "variables": {
          "type": "object",
          "description": "Variables optionnelles injectées dans l'espace du script (ex: {'topic': 'AI', 'max_results': 5}).",
          "additionalProperties": true
        },
        "timeout": {
          "type": "integer",
          "minimum": 1,
          "maximum": 300,
          "description": "Délai d'exécution en secondes (défaut: 60)."
        },
        "allowed_tools": {
          "type": "array",
          "description": "Liste blanche facultative des outils autorisés dans le script.",
          "items": { "type": "string" }
        }
      },
      "required": ["script"],
      "additionalProperties": false
    }
  }
}
