# ðŸ” MÃ‰THODOLOGIE AUDIT TOOLS

## Ã‰tat: 4/40 auditÃ©s
- discord_bot: 9.6/10 âœ…
- ship_tracker: 9.4/10 âœ…  
- random: crÃ©Ã© âœ…
- chess_com: 8.8/10 âœ…

---

## PROCESS (7 Ã©tapes)

### 1. SÃ‰LECTION RANDOM
- Utiliser le tool `random`: `pick_random` avec la liste des 36 tools restants
- Simple et rapide

### 2. CHARGEMENT
```
load_file: [
  "src/tools/{tool}.py",
  "src/tool_specs/{tool}.json", 
  "src/tools/_{tool}/*.py"  // TOUS
]
```

### 3. AUDIT

#### A. JSON SPEC (CRITIQUE - LLM)
- [ ] `category` dÃ©finie
- [ ] `displayName` prÃ©sent
- [ ] `additionalProperties: false`
- [ ] Arrays avec `items`
- [ ] Enums complets
- [ ] `description` claire (1 ligne max)
- [ ] `required` corrects
- [ ] Defaults sensÃ©s
- [ ] Limits min/max

**Questions**:
- LLM comprend CHAQUE param ?
- Descriptions ambiguÃ«s ?
- Params secrets ?

#### B. CODE
- [ ] Output size: limits + truncation warnings
- [ ] Validation stricte
- [ ] Try-catch global
- [ ] Timeouts
- [ ] Pas side-effects import
- [ ] Logging minimal
- [ ] DRY
- [ ] Modulaire

**Outputs MINIMAUX**:
```python
âœ… return [1,2,3]
âœ… return "heads"

âŒ return {"success": true, "operation": "...", ...}
```

#### C. NOTATION
- JSON Spec LLM: /10
- Architecture: /10
- SÃ©curitÃ©: /10
- Robustesse: /10
- ConformitÃ©: /10
- Performance: /10
- MaintenabilitÃ©: /10
- Documentation: /10

**Score total**: X.X/10

### 4. CORRECTIFS
```
fix({tool}): critical audit fixes (X.Xâ†’Y.Y/10)

ðŸ”´ CRITICAL:
- Bug 1
  â†’ BEFORE: ...
  â†’ AFTER: ...

ðŸŸ¡ MAJOR:
- AmÃ©lioration 1

ðŸŸ¢ IMPROVEMENTS:
- AmÃ©lioration 2

TECHNICAL DETAILS:
- file.py: +XXX bytes
- ConformitÃ©: XX% â†’ YY%

AUDIT SCORE: X.X/10 â†’ Y.Y/10 â­â­â­â­

Part of: [Unreleased] Tools Audit Campaign
```

### 5. TEST HTTP âš¡ AUTOMATIQUE

**IMPORTANT**: Tester directement avec `http_client` pour valider les correctifs.

#### A. Reload tools
```bash
GET /tools?reload=1
```

#### B. Tester 2-3 opÃ©rations reprÃ©sentatives
Choisir des opÃ©rations qui couvrent :
- Une opÃ©ration simple (ex: get_info, list, search)
- Une opÃ©ration avec paramÃ¨tres (ex: search avec query)
- Une opÃ©ration avec limits (si applicable)

**Template de test**:
```python
# Test 1: OpÃ©ration simple
POST /execute {
  "tool": "{tool}",
  "params": {
    "operation": "xxx",
    ...
  }
}

# Test 2: OpÃ©ration avec params
POST /execute {
  "tool": "{tool}",
  "params": {
    "operation": "yyy",
    "query": "test",
    "limit": 5
  }
}

# Test 3: OpÃ©ration edge case (optionnel)
POST /execute {
  "tool": "{tool}",
  "params": {
    "operation": "zzz",
    ...
  }
}
```

#### C. Validation des rÃ©sultats
- âœ… Extraire **JUSTE** `body.result` (pas le HTTP complet)
- âœ… VÃ©rifier structure conforme
- âœ… VÃ©rifier truncation warnings (si applicable)
- âœ… VÃ©rifier counts clairs (total vs returned)
- âœ… Pas de metadata superflue

**Format d'affichage**:
```
âœ… Test 1 PASSED: {operation} fonctionne
Result: {extraire les 5-10 premiÃ¨res lignes du result}

âŒ Test 2 FAILED: {operation} erreur
Error: {message d'erreur}
```

#### D. En cas d'erreur
- Analyser l'erreur
- Corriger le code
- Re-tester
- Documenter dans CHANGELOG (section "Fixed during testing")

### 6. CHANGELOG

Ajouter section dans `[Unreleased]`:
```markdown
### {tool} - [DATE] âœ… AUDITED

**Score**: X.X â†’ Y.Y/10

#### Fixed
- Bug 1
- Bug 2

#### Improved
- AmÃ©lioration 1

#### Technical Details
- Files modifiÃ©s
- ConformitÃ©: XX% â†’ YY%

#### Audit Results
[Tableau scores]

**SCORE FINAL: Y.Y/10** â­â­â­â­â­

#### Known Issues (si applicable)
- Issue 1: Description (confirmÃ© Perplexity si externe)
```

**IMPORTANT**: VÃ©rifier la taille du CHANGELOG :
- Si > 10KB : **ROTATION OBLIGATOIRE**
  - CrÃ©er `changelogs/CHANGELOG_{start}_to_{end}.md`
  - Garder uniquement `[Unreleased]` dans CHANGELOG.md racine
  - Note en tÃªte: "Older entries have been archived under changelogs/"

### 7. COMMIT + PUSH
```bash
git commit_all -m "fix({tool}): critical audit fixes (X.Xâ†’Y.Y/10)

ðŸ”´ CRITICAL:
- Fix 1

ðŸŸ¡ MAJOR:
- Fix 2

ðŸŸ¢ IMPROVEMENTS:
- Fix 3

TECHNICAL DETAILS:
- file.py: +XXX bytes
- ConformitÃ©: XX% â†’ YY%

AUDIT SCORE: X.X/10 â†’ Y.Y/10 â­â­â­â­

KNOWN ISSUES (si applicable):
- Issue 1

Part of: [Unreleased] Tools Audit Campaign

CHANGELOG: [OK / Rotated to changelogs/XXX]"

git push main
```

---

## RÃˆGLES ABSOLUES

1. **JSON**: Auditer lisibilitÃ© LLM
2. **OUTPUTS**: Minimaux (pas metadata)
3. **TRUNCATION**: Warnings si > 50 items
4. **TESTS**: âš¡ **AUTOMATIQUES** avec http_client (extraire `body.result` uniquement)
5. **CHANGELOG**: Toujours mÃ j + rotation si > 10KB
6. **PAS RELEASE**: Juste push
7. **PERPLEXITY**: SystÃ©matique pour les 404 ou bugs suspects d'API externe

---

## COMMANDE REPRISE

```
Audite le prochain tool (random)
```

**Workspace dÃ©jÃ  chargÃ©**: LLM_DEV_GUIDE.md, README.md, CHANGELOG.md

**36 tools restants**: academic_research_super, astronomy, aviation_weather, call_llm, coingecko, date, device_location, discord_webhook, email_send, excel_to_sqlite, ffmpeg_frames, flight_tracker, generate_edit_image, git, gitbook, google_maps, http_client, imap, math, news_aggregator, office_to_pdf, ollama_local, open_meteo, pdf2text, pdf_download, pdf_search, reddit_intelligence, script_executor, sqlite_db, ssh_admin, telegram_bot, trivia_api, universal_doc_scraper, velib, video_transcribe, youtube_download, youtube_search

PrÃªt. ðŸš€
