# ðŸ” MÃ‰THODOLOGIE AUDIT TOOLS

## Ã‰tat: 13/40 auditÃ©s
telegram_bot: 9.2/10 | discord_bot: 9.6/10 | ship_tracker: 9.4/10 | youtube_download: 9.3/10 | sqlite_db: 9.0/10 | gitbook: 8.9/10 | pdf_search: 8.8/10 | chess_com: 8.8/10 | date: 8.5/10 | academic_research_super: 8.1/10 | random: crÃ©Ã©

**27 restants**: astronomy, aviation_weather, call_llm, coingecko, device_location, discord_webhook, email_send, excel_to_sqlite, ffmpeg_frames, flight_tracker, generate_edit_image, git, google_maps, http_client, imap, math, news_aggregator, office_to_pdf, ollama_local, open_meteo, pdf2text, pdf_download, reddit_intelligence, script_executor, ssh_admin, trivia_api, universal_doc_scraper, velib, video_transcribe, youtube_search

---

## PROCESS (10 Ã©tapes)

### 1. SÃ‰LECTION
`random pick_random` sur la liste des 27 restants

### 2. CHARGEMENT
```
load_file: ["src/tools/{tool}.py", "src/tool_specs/{tool}.json", "src/tools/_{tool}/*.py"]
```

### 3. TESTS PRÃ‰LIMINAIRES

**âš ï¸ CRITIQUE: Appels UN PAR UN (jamais parallÃ¨le) sinon Ã©chec systÃ¨me**

**âš ï¸ IMPORTANT: NE PAS FAIRE `/tools?reload=1` - FLOODS LE LLM (119KB JSON)**

A. **Reload silencieux d'abord**:
   ```
   http_client GET http://127.0.0.1:8000/tools?reload=1
   ```
   â†’ Ne PAS examiner le body (trop gros), juste vÃ©rifier status 200

B. **Charger JSON spec localement**:
   ```
   load_file: "src/tool_specs/{tool}.json"
   ```
   â†’ Examiner le JSON pour comprendre les operations/params

C. **5 tests baseline** (UN PAR UN):
   1. OpÃ©ration simple (get_info/list)
   2. Avec params (search + query)
   3. Validation (param invalide)
   4. Edge case (limite dÃ©passÃ©e)
   5. OpÃ©ration complexe

D. **Observations**:
   - Outputs propres/verbeux ?
   - Erreurs claires ?
   - Validation stricte ?
   - Truncation warnings ?
   - Counts explicites (total vs returned) ?
   - Timeouts OK ?

### 4. AUDIT

**JSON Spec**:
- [ ] category, displayName, additionalProperties:false
- [ ] Arrays avec items, enums complets
- [ ] required corrects, defaults explicites
- [ ] Descriptions claires (1 ligne max)
- [ ] CohÃ©rence JSON â†” tests

**Code**:
- [ ] Output size: limits + truncation warnings
- [ ] Validation stricte
- [ ] Try-catch global
- [ ] Timeouts cohÃ©rents
- [ ] Logging minimal
- [ ] Pas side-effects import

**Notation** (score /10 par critÃ¨re):
JSON Spec LLM | Architecture | SÃ©curitÃ© | Robustesse | ConformitÃ© | Performance | MaintenabilitÃ© | Documentation

**PÃ©nalitÃ©s**:
- Validation faible â†’ Robustesse -2
- Outputs verbeux â†’ ConformitÃ© -2
- Pas truncation warning â†’ Performance -1
- Erreurs floues â†’ Documentation -1

### 5. CORRECTIFS

**âš ï¸ DÃ‰COUPAGE FICHIERS**: Si un fichier dÃ©passe 10KB ou 300 lignes, dÃ©couper logiquement en modules sÃ©parÃ©s (api.py, core.py, validators.py, utils.py, services/).

Format commit:
```
fix({tool}): critical audit fixes (X.Xâ†’Y.Y/10)

ðŸ”´ CRITICAL: [bugs tests 1-5]
ðŸŸ¡ MAJOR: [outputs, validation]
ðŸŸ¢ IMPROVEMENTS: [truncation, logging]

TECHNICAL: files modifiÃ©s, conformitÃ© XX%â†’YY%
AUDIT SCORE: X.Xâ†’Y.Y/10
```

### 6. TESTS VALIDATION

**âš ï¸ UN PAR UN**

Reload tools silencieux â†’ Re-tester uniquement ce qui posait problÃ¨me:
- Bugs dÃ©tectÃ©s â†’ vÃ©rifier correction
- Outputs verbeux â†’ vÃ©rifier simplification
- Validation faible â†’ vÃ©rifier renforcement

### 7. TESTS NON-RÃ‰GRESSION

**âš ï¸ OBLIGATOIRE - UN PAR UN**

A. **Identifier** toutes fonctionnalitÃ©s:
   - Toutes opÃ©rations
   - Tous providers/sources
   - Tous filtres (dates, limites)
   - Multi-sources, edge cases

B. **Tester exhaustivement**:
   - Chaque source individuellement
   - Combinaisons multi-sources
   - Filtres temporels
   - Overrides limites
   - Nouveaux paramÃ¨tres ajoutÃ©s

C. **Tableau synthÃ¨se OBLIGATOIRE**:
```
| Test | FonctionnalitÃ© | Avant | AprÃ¨s | Statut |
|------|----------------|-------|-------|--------|
| âœ… 1 | Source A | âœ… | âœ… | OK |
| âœ… 2 | Source B | âœ… | âœ… | OK |
| âœ… 3 | Multi-sources | âœ… | âœ… | OK |
| âŒ 4 | Feature X | âœ… | âŒ | CASSÃ‰ |
```

D. **Si rÃ©gression**: STOP â†’ analyser â†’ corriger â†’ re-tester â†’ reprendre 7A

E. **Validation finale**: Tous tests âœ… â†’ commit

### 8. CHANGELOG

Ajouter dans `[Unreleased]`:
```markdown
### {tool} - [DATE] âœ… AUDITED (X.Xâ†’Y.Y/10)

**Fixed**: [bugs tests]

**Technical**: files modifiÃ©s, conformitÃ© XX%â†’YY%

**Tests**: X/X non-rÃ©gression OK.

**SCORE FINAL: Y.Y/10** â­â­â­â­

**Known Issues**: [si applicable]
```

**Si CHANGELOG > 10KB**: rotation obligatoire â†’ `changelogs/CHANGELOG_{start}_to_{end}.md`

### 9. COMMIT + PUSH

```bash
git commit_all -m "fix({tool}): critical audit fixes (X.Xâ†’Y.Y/10)
[message dÃ©taillÃ© Ã©tape 5]
âœ… Non-rÃ©gression: X/X tests OK"

git push main
```

### 10. UNLOAD + MAJ PROCÃ‰DURE

```bash
unload_file: ["src/tools/{tool}.py", "src/tool_specs/{tool}.json", "src/tools/_{tool}/*.py"]
```

**Mettre Ã  jour cette procÃ©dure**:
- IncrÃ©menter compteur (12â†’13/40)
- Ajouter tool Ã  liste auditÃ©s (ordre dÃ©croissant score)
- Retirer de liste restants
- Commit: `docs(audit): update methodology - {tool} audited (X/40)`

---

## RÃˆGLES ABSOLUES

1. ðŸš¨ **Appels UN PAR UN** (jamais parallÃ¨le http_client)
2. ðŸš¨ **NE PAS examiner body de `/tools?reload=1`** (119KB, floods LLM)
3. **Charger JSON spec localement** avant tests
4. **Tests avant audit** (Ã©tape 3)
5. **Outputs minimaux** (pas metadata success/operation)
6. **Truncation warnings** si > 50 items
7. **Tests validation** aprÃ¨s correctifs
8. ðŸš¨ **Tests non-rÃ©gression OBLIGATOIRES**
9. **CHANGELOG** mÃ j + rotation si > 10KB
10. **Perplexity** pour 404/bugs API externes
11. **Unload** toujours Ã  la fin
12. **ProcÃ©dure** mÃ j aprÃ¨s chaque audit
13. ðŸš¨ **DÃ©coupage fichiers** si > 10KB ou 300 lignes
14. ðŸš¨ **CHANGELOG condensÃ©** (essentiel uniquement, pas de blabla)

---

## COMMANDE REPRISE

```
Audite le prochain tool (random)
```

Workspace: LLM_DEV_GUIDE.md, README.md, CHANGELOG.md, procÃ©dure
