












# ğŸ” MÃ‰THODOLOGIE AUDIT TOOLS

## Ã‰tat: 23/40 auditÃ©s âœ…

Tools restants (17): astronomy, coingecko, excel_to_sqlite, ffmpeg_frames, flight_tracker, git, imap, math, news_aggregator, ollama_local, pdf2text, pdf_download, reddit_intelligence, script_executor, ssh_admin, universal_doc_scraper, youtube_search

âœ… Derniers audits:
- open_meteo (22/40) â€” 8.8â†’9.6/10 â€” validation + NR 100% OK â€” split core_weather/core_geo, truncation counts
- office_to_pdf (23/40) â€” 8.9â†’9.5/10 â€” validation + NR 100% OK â€” lazy import + service office_converter

---

## WORKSPACE (rÃ¨gles fermes)
- LLM_DEV_GUIDE.md et ce fichier DOIVENT rester chargÃ©s.
- UN SEUL tool Ã  la fois.
- ğŸ² SÃ©lection du prochain tool: si plusieurs tools restants, utiliser le MCP tool Â« random Â» (operation: pick_random) avec la liste Â« Tools restants Â». Si un seul tool reste, le sÃ©lectionner directement (sans tirage).
- ğŸ”„ RELOAD OBLIGATOIRE: aprÃ¨s toute crÃ©ation/modification dâ€™un tool, le LLM DOIT appeler GET /tools?reload=1 (rÃ©ponse compacte par dÃ©faut: {reloaded, tool_count, errors}). Nâ€™utiliser list=1 quâ€™en cas de besoin explicite de la liste complÃ¨te.
- Unload du tool Ã  la fin seulement.

---

## PROCESS (10 Ã©tapes) + Mermaid (ASCII safe)

```mermaid
flowchart TD
  A[Start] --> B[Select_tool (random if many)]
  B --> C[Load_tool_files]
  C --> C2[Tools_reload]
  C2 --> D[Pre_tests_3]
  D --> E[Abort_document]
  D --> F[Audit_spec_code]
  F --> G{Nonconformities}
  G --> H[Fixes]
  G --> I[Validation_tests]
  H --> I
  I --> J{Validation_OK}
  J --> H
  J --> K[NR_tests_5]
  K --> L{NR_100_OK}
  L --> H
  L --> M[Changelog_update]
  M --> N{Gate_commit_push}
  N --> O[Commit_push]
  N --> P[Commit_local_only]
  O --> Q[Unload_update_procedure]
  P --> Q
  E --> Q
```

Notes:
- Ã‰tape B: choisir le prochain tool par tirage via Â« random Â» (pick_random) quand il en reste plusieurs; sinon sÃ©lectionner lâ€™unique restant.
- Ã‰tape C2 obligatoire: GET /tools?reload=1 juste avant les tests (compact, sans liste par dÃ©faut). Si besoin de la liste, utiliser /tools?reload=1&list=1.

---

## Rappels critiques
1) Un seul tool Ã  la fois; RELOAD OBLIGATOIRE via GET /tools?reload=1 aprÃ¨s dev/modif et avant tests
2) Tests rÃ©els via MCP; ABORT si impossibles
3) Validation stricte; outputs minimaux; limits + truncation si listes
4) Commit+Push seulement si NR=100% OK
5) Changelog: derniÃ¨re entrÃ©e en premier dans Unreleased (puis dÃ©placer en release lors de la coupe)
6) Unload seulement le tool; garder les docs chargÃ©s

---

## Mises Ã  jour (v2 â€“ 2025-10-13)

- SÃ©lection du tool: le tirage au sort est OBLIGATOIRE avec le tool Â« random Â» (operation: pick_random) parmi la liste Â« Tools restants Â», sauf sâ€™il ne reste quâ€™un seul tool (alors sÃ©lection directe sans tirage).
- Reload outillÃ©: GET /tools?reload=1 est obligatoire juste avant les tests; par dÃ©faut, rÃ©ponse compacte {reloaded, tool_count, errors}. Nâ€™utiliser &list=1 que si nÃ©cessaire.
- PrÃ©-tests: 3 Ã  5 cas nominaux max via POST /execute pour dÃ©tecter crashs immÃ©diats; ABORT documentÃ© si le serveur nâ€™est pas disponible.
- Invariants outputs: pour les opÃ©rations listant des Ã©lÃ©ments, un paramÃ¨tre limit (dÃ©faut raisonnable), total_count et truncated doivent Ãªtre prÃ©sents. Ã‰viter toute sortie verbeuse.
- Taille fichiers: respecter <7KB ou 250 lignes; dÃ©couper par responsabilitÃ©s.
- Dead code: supprimer imports/fonctions non utilisÃ©s; commit dÃ©diÃ© recommandÃ© (refactor: remove dead code (... bytes saved)).
