
{
  "version": "1.0",
  "process_version": "1.3.1",
  "metadata": {
    "description": "Minecraft Stockfish worker: SSOT subgraphs (Init split → CLEAR → BOARD → PIECES → LEVER → Turn loop).",
    "author": "orchestrator-team",
    "architecture": "Init: GI_ENV → GI_CLEAR_AREA → GI_PLATFORM_BOARD → GI_SPAWN_LOCK_SNAP → GI_LEVER_FW → TURN_TIMER → MOVE_PIPELINE → VALIDATE_MOVE → ENGINE_TURN; SANCTION on branches"
  },
  "worker_ctx": {"$import": "config/worker_ctx.json"},
  "scopes": {"$import": "config/scopes.json"},
  "graph": {
    "subgraphs": [
      {"id": "GI_ENV", "name": "Init: Environment", "import": "subgraphs/01a_gi_env.subgraph.json"},
      {"id": "GI_CLEAR_AREA", "name": "Init: Clear Area", "import": "subgraphs/01b_gi_clear_area.subgraph.json"},
      {"id": "GI_PLATFORM_BOARD", "name": "Init: Platform & Board", "import": "subgraphs/01c_gi_platform_board.subgraph.json"},
      {"id": "GI_SPAWN_LOCK_SNAP", "name": "Init: Spawn, Lock, Snapshot", "import": "subgraphs/01f_gi_spawn_lock_snap.subgraph.json"},
      {"id": "GI_LEVER_FW", "name": "Init: Lever & Fireworks", "import": "subgraphs/01d_gi_lever_fw.subgraph.json"},

      {"id": "TURN_TIMER", "name": "Turn Timer", "import": "subgraphs/02_turn_timer.subgraph.json"},
      {"id": "MOVE_PIPELINE", "name": "Move Pipeline", "import": "subgraphs/04_move_pipeline.subgraph.json"},
      {"id": "VALIDATE_MOVE", "name": "Validate Move", "import": "subgraphs/05_validate_move.subgraph.json"},
      {"id": "ENGINE_TURN", "name": "Engine Turn", "import": "subgraphs/06_engine_turn.subgraph.json"},
      {"id": "SANCTION_TNT", "name": "Sanction TNT", "import": "subgraphs/03_sanction_tnt.subgraph.json"},

      {"id": "WAND_SELECT", "name": "Wand Select", "import": "subgraphs/03_wand_select.subgraph.json"},
      {"id": "WAND_DROP", "name": "Wand Drop", "import": "subgraphs/04_wand_drop.subgraph.json"}
    ],
    "nodes": [
      {"name": "START", "type": "start"},
      {"name": "EXIT", "type": "exit"}
    ],
    "edges": [
      {"from": "START", "to": "GI_ENV"},
      {"from": "GI_ENV", "to": "GI_CLEAR_AREA"},
      {"from": "GI_CLEAR_AREA", "to": "GI_PLATFORM_BOARD"},
      {"from": "GI_PLATFORM_BOARD", "to": "GI_SPAWN_LOCK_SNAP"},
      {"from": "GI_SPAWN_LOCK_SNAP", "to": "GI_LEVER_FW"},

      {"from": "GI_LEVER_FW", "to": "TURN_TIMER"},

      {"from": "TURN_TIMER", "to": "SANCTION_TNT", "when": "timeout"},
      {"from": "TURN_TIMER", "to": "MOVE_PIPELINE", "when": "ok"},

      {"from": "MOVE_PIPELINE", "to": "TURN_TIMER", "when": "timeout"},
      {"from": "MOVE_PIPELINE", "to": "VALIDATE_MOVE", "when": "moved"},

      {"from": "VALIDATE_MOVE", "to": "SANCTION_TNT", "when": "bad"},
      {"from": "VALIDATE_MOVE", "to": "ENGINE_TURN", "when": "ok"},

      {"from": "ENGINE_TURN", "to": "TURN_TIMER", "when": "loop"},

      {"from": "SANCTION_TNT", "to": "EXIT"}
    ]
  }
}
