{
  "version": "1.0",
  "process_version": "0.3.0-test",
  "metadata": {
    "description": "Test MCP tool call (date tool via http_tool handler)",
    "author": "orchestrator-dev"
  },
  "worker_ctx": {
    "timezone": "UTC",
    "sleep_seconds": 5
  },
  "graph": {
    "nodes": [
      {
        "name": "START",
        "type": "start"
      },
      {
        "name": "get_date",
        "type": "io",
        "handler": "http_tool",
        "inputs": {
          "tool": "date",
          "operation": "now",
          "timezone": "${worker.timezone}"
        },
        "outputs": {
          "iso": "cycle.date.iso",
          "timestamp": "cycle.date.timestamp"
        },
        "retry": {
          "max": 1,
          "delay_sec": 0.5
        }
      },
      {
        "name": "check_date",
        "type": "decision",
        "decision": {
          "kind": "truthy",
          "input": "${cycle.date.iso}"
        }
      },
      {
        "name": "log_success",
        "type": "transform",
        "handler": "sleep",
        "inputs": {
          "seconds": 0
        },
        "outputs": {
          "done": "cycle.result.success"
        }
      },
      {
        "name": "log_failure",
        "type": "transform",
        "handler": "sleep",
        "inputs": {
          "seconds": 0
        },
        "outputs": {
          "done": "cycle.result.failed"
        }
      },
      {
        "name": "END",
        "type": "end"
      }
    ],
    "edges": [
      {"from": "START", "to": "get_date"},
      {"from": "get_date", "to": "check_date"},
      {"from": "check_date", "to": "log_success", "when": "true"},
      {"from": "check_date", "to": "log_failure", "when": "false"},
      {"from": "log_success", "to": "END"},
      {"from": "log_failure", "to": "END"}
    ]
  },
  "scopes": [
    {
      "name": "date",
      "reset_on": ["START"],
      "seed": {}
    },
    {
      "name": "result",
      "reset_on": ["START"],
      "seed": {}
    }
  ],
  "graph_mermaid": "graph TD\n  START-->get_date\n  get_date-->check_date\n  check_date-->|true|log_success\n  check_date-->|false|log_failure\n  log_success-->END\n  log_failure-->END"
}
