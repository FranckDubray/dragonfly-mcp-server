# ============================================================
# Dragonfly MCP Server - Environment Variables
# ============================================================
# Copier ce fichier : cp .env.example .env
# Le .env est ignoré par git (sécurité)

# ============================================================
# SERVEUR
# ============================================================
# Adresse et port d'écoute du serveur
MCP_HOST=127.0.0.1
MCP_PORT=8000

# Niveau de log (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Timeout d'exécution des tools en secondes
EXECUTE_TIMEOUT_SEC=300

# Détection automatique des nouveaux tools (0=désactivé, 1=activé)
AUTO_RELOAD_TOOLS=1

# ============================================================
# LLM ORCHESTRATION (call_llm)
# ============================================================
# Token d'authentification pour le portail AI
AI_PORTAL_TOKEN=your_ai_portal_token_here

# Endpoint LLM custom (optionnel)
LLM_ENDPOINT=https://your-llm-endpoint.com

# Timeout des requêtes LLM en secondes
LLM_REQUEST_TIMEOUT_SEC=300

# Debug LLM (0=désactivé, 1=activé)
LLM_RETURN_DEBUG=0
LLM_STREAM_TRACE=0
LLM_STREAM_DUMP=0

# URL du serveur MCP pour appels internes
MCP_URL=http://127.0.0.1:8000

# ============================================================
# OLLAMA LOCAL + WEB SEARCH
# ============================================================
# Token pour la recherche web Ollama cloud (optionnel)
# Si absent, désactive web_search et chat_with_web
# Obtenir un token : https://ollama.com/
OLLAMA_WEB_SEARCH_TOKEN=your_ollama_web_search_token_here

# ============================================================
# NEWS AGGREGATOR (multi-sources)
# ============================================================
# Au moins une clé requise pour news_aggregator

# NewsAPI.org - GRATUIT (100 req/jour, délai 24h, pas usage commercial)
# https://newsapi.org/register
# Supporte: top_headlines (actualités par pays/catégorie)
# NE supporte PAS: search_news (HTTP 426 sur free tier)
NEWS_API_KEY=your_newsapi_key_here

# New York Times - GRATUIT (1000 req/jour)
# https://developer.nytimes.com/get-started
# Supporte: search_news (recherche par mots-clés, dates, archive complète)
NYT_API_KEY=your_nyt_key_here

# The Guardian - GRATUIT (~500 req/jour, archive depuis 1999)
# https://open-platform.theguardian.com/access/
# Supporte: search_news (recherche par mots-clés, dates, contenu complet)
GUARDIAN_API_KEY=your_guardian_key_here

# Total quotas : ~1600 requêtes/jour combinées

# ============================================================
# GIT & GITHUB
# ============================================================
# Personal Access Token GitHub (scope: repo, workflow)
GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ============================================================
# GOOGLE SERVICES (YouTube, Maps) - FALLBACK LOGIC
# ============================================================
# Option 1: Token générique (fallback pour tous les services Google)
GOOGLE_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Option 2: Tokens spécifiques (prioritaires si définis)
YOUTUBE_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
GOOGLE_MAPS_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Note: Si YOUTUBE_API_KEY ou GOOGLE_MAPS_API_KEY manquent,
# les tools utiliseront automatiquement GOOGLE_API_KEY (fallback)

# ============================================================
# COMMUNICATION
# ============================================================
# Telegram Bot Token (gratuit, illimité)
# Obtenir un token : @BotFather sur Telegram
TELEGRAM_BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11

# ============================================================
# SHIP TRACKING (AIS)
# ============================================================
# AISStream.io API Key (gratuit)
# Obtenir une clé : https://aisstream.io
AISSTREAM_API_KEY=your_aisstream_api_key_here

# ============================================================
# IMAP EMAIL (multi-comptes)
# ============================================================
# Gmail
IMAP_GMAIL_EMAIL=your.email@gmail.com
IMAP_GMAIL_PASSWORD=your_app_password

# Outlook
IMAP_OUTLOOK_EMAIL=your.email@outlook.com
IMAP_OUTLOOK_PASSWORD=your_password

# Yahoo
IMAP_YAHOO_EMAIL=your.email@yahoo.com
IMAP_YAHOO_PASSWORD=your_app_password

# iCloud
IMAP_ICLOUD_EMAIL=your.email@icloud.com
IMAP_ICLOUD_PASSWORD=your_app_password

# Infomaniak
IMAP_INFOMANIAK_EMAIL=contact@yourdomain.com
IMAP_INFOMANIAK_PASSWORD=your_password

# Serveur IMAP custom
IMAP_CUSTOM_EMAIL=your.email@custom.com
IMAP_CUSTOM_PASSWORD=your_password
IMAP_CUSTOM_SERVER=imap.custom.com
IMAP_CUSTOM_PORT=993
IMAP_CUSTOM_USE_SSL=1

# ============================================================
# VÉLIB' (transport Paris)
# ============================================================
# URLs API Open Data Vélib' Métropole (optionnel, valeurs par défaut fournies)
VELIB_STATION_INFO_URL=https://velib-metropole-opendata.smovengo.cloud/opendata/Velib_Metropole/station_information.json
VELIB_STATION_STATUS_URL=https://velib-metropole-opendata.smovengo.cloud/opendata/Velib_Metropole/station_status.json

# ============================================================
# SAFE JSON (sérialisation)
# ============================================================
# Convertir les très grands entiers en strings (0=désactivé, 1=activé)
BIGINT_AS_STRING=1

# Seuil de conversion en nombre de chiffres
BIGINT_STR_THRESHOLD=50

# Limite Python pour la conversion int→str
PY_INT_MAX_STR_DIGITS=10000

# ============================================================
# ACADEMIC RESEARCH
# ============================================================
# Nombre maximum d'articles retournés
ACADEMIC_RS_MAX_ITEMS=50

# Longueur maximum des abstracts en caractères
ACADEMIC_RS_MAX_ABSTRACT_CHARS=2000

# Taille maximum du payload JSON en octets
ACADEMIC_RS_MAX_BYTES=200000

# ============================================================
# SCRIPT EXECUTOR
# ============================================================
# Timeout d'exécution des scripts Python en secondes
SCRIPT_TIMEOUT_SEC=60

# ============================================================
# HOT-RELOAD
# ============================================================
# Variables modifiables en live via /control (sans restart) :
# - AI_PORTAL_TOKEN, LLM_ENDPOINT, LLM_REQUEST_TIMEOUT_SEC
# - GITHUB_TOKEN, YOUTUBE_API_KEY, GOOGLE_API_KEY, GOOGLE_MAPS_API_KEY
# - AISSTREAM_API_KEY, OLLAMA_WEB_SEARCH_TOKEN
# - NEWS_API_KEY, NYT_API_KEY, GUARDIAN_API_KEY
# - Tous les IMAP_*
# - VELIB_*, BIGINT_*, ACADEMIC_RS_*, SCRIPT_TIMEOUT_SEC
#
# Variables nécessitant un restart :
# - MCP_HOST, MCP_PORT, LOG_LEVEL, EXECUTE_TIMEOUT_SEC, AUTO_RELOAD_TOOLS
